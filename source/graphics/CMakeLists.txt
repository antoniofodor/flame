get_filename_component(DIR ${CMAKE_CURRENT_SOURCE_DIR} NAME)
file(GLOB_RECURSE INCLUDE_LIST "${INCLUDE_DIR}/${DIR}/*.h*")
file(GLOB_RECURSE SOURCE_LIST "*.h*" "*.c*")
add_library(flame_graphics SHARED ${INCLUDE_LIST} ${SOURCE_LIST})
add_typeinfo_support(flame_graphics "${INCLUDE_DIR}/${DIR}" "${CMAKE_CURRENT_SOURCE_DIR}")
set_target_properties(flame_graphics PROPERTIES FOLDER "flame")
target_compile_definitions(flame_graphics PRIVATE FLAME_GRAPHICS_MODULE)
if (FLAME_RENDER_API MATCHES "Vulkan")
	target_compile_definitions(flame_graphics PRIVATE VK_USE_PLATFORM_WIN32_KHR)
	target_include_directories(flame_graphics PRIVATE "$ENV{VK_SDK_PATH}/Include")
	target_link_libraries(flame_graphics "$ENV{VK_SDK_PATH}/Lib/vulkan-1.lib")
elseif(FLAME_RENDER_API MATCHES "D3D12")
	target_link_libraries(flame_graphics "d3d12.lib" "dxgi.lib")
endif()
target_include_directories(flame_graphics PRIVATE "${STB_INCLUDE_DIR}")
target_include_directories(flame_graphics PUBLIC "${CMAKE_SOURCE_DIR}/include")
target_link_libraries(flame_graphics flame_foundation)
if (FLAME_ENABLE_MODEL)
	target_include_directories(flame_graphics PRIVATE "${ASSIMP_INCLUDE_DIR}")
	target_link_libraries(flame_graphics "${ASSIMP_STATIC_LIBRARY_PATH}")
	add_custom_command(TARGET flame_graphics POST_BUILD COMMAND ${CMAKE_COMMAND} -E copy_if_different "${ASSIMP_SHARED_LIBRARY_PATH}" $(TargetDir))
endif()
