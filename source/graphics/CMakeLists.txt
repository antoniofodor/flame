file(GLOB SOURCE_LIST "*.c*")
add_lib(flame_graphics "${SOURCE_LIST}" "flame")
target_compile_definitions(flame_graphics PRIVATE FLAME_GRAPHICS_MODULE)
if (FLAME_RENDER_API MATCHES "Vulkan")
	target_compile_definitions(flame_graphics PRIVATE VK_USE_PLATFORM_WIN32_KHR)
	target_include_directories(flame_graphics PRIVATE $ENV{VK_SDK_PATH}/Include)
	target_include_directories(flame_graphics PRIVATE ${SPRIV_CROSS_PATH})
	target_link_libraries(flame_graphics $ENV{VK_SDK_PATH}/Lib/vulkan-1.lib)
	target_link_libraries(flame_graphics ${SPRIV_CROSS_PATH}/build/Debug/spirv-cross-core.lib)
	target_link_libraries(flame_graphics ${SPRIV_CROSS_PATH}/build/Debug/spirv-cross-cpp.lib)
	target_link_libraries(flame_graphics ${SPRIV_CROSS_PATH}/build/Debug/spirv-cross-glsl.lib)
elseif(FLAME_RENDER_API MATCHES "D3D12")
	target_link_libraries(flame_graphics "d3d12.lib" "dxgi.lib")
endif()
target_include_directories(flame_graphics PRIVATE ${FREETYPE_PATH}/include)
target_include_directories(flame_graphics PRIVATE ${MSDFGEN_PATH})
target_include_directories(flame_graphics PUBLIC "${CMAKE_SOURCE_DIR}/include")
target_link_libraries(flame_graphics ${FREETYPE_PATH}/win64/freetype.lib)
target_link_libraries(flame_graphics ${MSDFGEN_PATH}/build/Debug/msdfgen.lib)
target_link_libraries(flame_graphics flame_foundation)
#add_custom_target(copy_freetype_dlls ${CMAKE_COMMAND} -E copy_if_different ${FREETYPE_PATH}/win64/freetype.dll ${CMAKE_SOURCE_DIR}/bin)
#add_dependencies(flame_graphics copy_freetype_dlls)
add_custom_command(TARGET flame_graphics POST_BUILD COMMAND ${CMAKE_SOURCE_DIR}/bin/typeinfogen ${CMAKE_SOURCE_DIR}/bin/flame_graphics.dll ${CMAKE_SOURCE_DIR}/bin/flame_foundation.typeinfo)
