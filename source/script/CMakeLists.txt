get_filename_component(DIR ${CMAKE_CURRENT_SOURCE_DIR} NAME)
file(GLOB_RECURSE INCLUDES "${INCLUDE_DIR}/${DIR}/*.h*")
file(GLOB_RECURSE SOURCES "*.h*" "*.c*")
add_library(flame_script SHARED ${INCLUDES} ${SOURCES})
set_target_properties(flame_script PROPERTIES FOLDER "flame")
target_compile_definitions(flame_script PRIVATE FLAME_SCRIPT_MODULE)
target_include_directories(flame_script PUBLIC "${CMAKE_SOURCE_DIR}/include")
target_include_directories(flame_script PRIVATE "${LUA_INCLUDE_DIR}")
target_link_libraries(flame_script "${LUA_STATIC_LIBRARY_PATH}")
target_link_libraries(flame_script flame_foundation)
add_custom_command(TARGET flame_script POST_BUILD COMMAND ${CMAKE_COMMAND} -E copy_if_different "${LUA_DYNAMIC_LIBRARY_PATH}" "${CMAKE_SOURCE_DIR}/bin/debug")
