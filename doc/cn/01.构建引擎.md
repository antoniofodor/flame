#### git的使用

如果你不熟悉使用github，请看这部分。

1. 请到这个网址 https://gitforwindows.org/ 下载并安装git bash 。
2. 然后在你想要安装库的目录右键，点击 git bash here 命令，在弹出的命令行中输入 git clone xxx 然后回车。 xxx为库下载地址，如：https://github.com/tkgamegroup/flame.git
3. 等待几分钟后，若出现 done 字样则下载成功，若不是，请重复输入命令再次回车（可以按方向键上建快速输入上次的命令）。

#### CMake的使用

如果你不熟悉CMake，请看这部分。
本引擎及大部分引擎引用的第三方库均使用CMake作为构建工具。有关CMake的介绍，请到 https://cmake.org/ 。

1. 到此网址下载CMake https://github.com/Kitware/CMake/releases/download/v3.18.2/cmake-3.18.2-win64-x64.msi ， 然后安装。
2. 在开始菜单搜索CMake，打开 CMake(cmake-gui) 这个程序（你可以把它固定到任务栏，方便下次查找）。
3. 在顶部的 Where is the source code: 栏中输入你下载好的库目录（如：D:/flame）。
4. 在顶部的 Where to build the binaries: 栏中输入刚才的目录加上 /build （如：D:/flame/build）。
5. 点击中部的 Generate 按钮，在弹出的对话框中点 Yes 。
6. 这时候会弹出一个让你选择 IDE 的页面，请选择 Visual Studio 16 2019，然后点 Finish 。
7. 等待片刻，则会产生一个工程文件，工程文件位于 build/xxx.sln ，双击即可用Visual Studio打开。
8. 在Visual Studio中点击菜单中的 构建-》构建解决方案 命令，等待片刻即可构建工程并产生输出文件。

#### 第三方库

引擎引用了数个第三方库，大部分需要从github下载，一些库下载下来后需要用CMake构建工程，一些则是自带安装程序的SDK。

1. 首先，请到这个网站下载并安装Vulkan SDK：https://vulkan.lunarg.com/sdk/home#windows 请选择Windows列中最新的那个。
下载过程可能会比较缓慢，可以使用迅雷等下载工具，或e-mail到594959742@qq.com说明Vulkan SDK，我会在附件中邮寄给你。

2. 下载并安装OpenAL SDK：http://www.openal.org/downloads/ ，请选择写有 OpenAL 1.1 Core SDK (zip) 的那一个。

3. 下载并安装LUA：https://sourceforge.net/projects/luabinaries/files/5.4.0/ ，请选择 Windows Libraries=》Dynamic=》lua-5.4.0_Win64_dllw6_lib.zip 。

4. 使用git bash下载NJSON与STB库，地址分别为 https://github.com/nlohmann/json.git 与 https://github.com/nothings/stb.git 。

5. 使用git bash下载pugixml库，命令为 git clone https://github.com/nothings/stb.git 。此库下载后需要用CMake构建。

#### 设置引擎环境变量

运行引擎目录中的 set_env.bat ，即可设置环境变量，如果此时你打开了 Visual Studio ，你需要关闭并重新打开 Visual Studio 才能起作用。

#### 配置并生成引擎

打开引擎的CMake窗口（打开cmake-gui，然后选择 source code 栏为工程的目录，binaries 栏为工程目录加上 /build）。开始配置第三方库目录。
注意到窗口中间有一个表格，左边为配置的名称，右边则为配置的值，我们需要填充这些项。

1. 配置LUA：

  &emsp;&emsp;配置 LUA_DYNAMIC_LIBRARY_PATH 为： xxx/lua54.dll
  
  &emsp;&emsp;配置 LUA_INCLUDE_DIR 为： xxx/include
  
  &emsp;&emsp;配置 LUA_STATIC_LIBRARY_PATH 为： xxx/liblua54.a
  
  &emsp;&emsp;xxx 为你安装的LUA库的目录，如：D:/lua-5.4.0_Win32_dllw6_lib
  
2. 配置NJSON：

  &emsp;&emsp;配置 NJSON_INCLUDE_DIR 为： xxx/include
  
  &emsp;&emsp;xxx 为你安装的NJSON库的目录，如：D:/json
  
3. 配置OPENAL：

  &emsp;&emsp;配置 OPENAL_INCLUDE_DIR 为： xxx/include
  
  &emsp;&emsp;配置 OPENAL_STATIC_LIBRARY_PATH 为： xxx/libs/Win64/OpenAL32.lib
  
  &emsp;&emsp;xxx 为你安装的OPENAL库的目录，如：D:/OpenAL 1.1 SDK
  
4. 配置PUGIXML：

  &emsp;&emsp;配置 PUGIXML_DEBUG_STATIC_LIBRARY_PATH 为： xxx/build/Debug/pugixml.lib
  
  &emsp;&emsp;配置 PUGIXML_INCLUDE_DIR 为： xxx/src
  
  &emsp;&emsp;配置 PUGIXML_RELEASE_STATIC_LIBRARY_PATH 为： xxx/build/Release/pugixml.lib
  
  &emsp;&emsp;xxx 为你安装的PUGIXML库的目录，如：D:/PUGIXML
  
5. 配置STB：

  &emsp;&emsp;配置 STB_INCLUDE_DIR 为： xxx
  
  &emsp;&emsp;xxx 为你安装的NJSON库的目录，如：D:/stb

6. 点击 CMake 中的 generate 按钮生成工程文件。然后用 Visual Studio 打开。你可以选择一些你感兴趣的项目构建预览。
具体为选择某一个项目，然后在其上点击右键，然后选择 设置为启动项目，然后点击顶部的绿色三角形即可。
（PS：大部分项目处于重构中，构建会失败。你可以选择 universe_test 预览，此项目现时可以构建并包含一些基本的操作。）
