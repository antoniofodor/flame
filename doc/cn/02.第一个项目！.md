如果你对CMake的使用不熟悉，请参阅 01.构建工程 了解CMake基本用法。

此教程将展示如何用CMake构建一个使用本引擎的项目。

首先，在你喜欢的位置建立一个空的目录，命名为你项目的名称。

然后，在此目录中建立一个main.cpp的文件，其中的内容为：

    #include <flame/universe/app.h>

    using namespace flame;
    using namespace graphics;

    App g_app;

    int main(int argc, char** args)
    {
      g_app.create();
      auto w = new GraphicsWindow(&g_app, true, true, "First Project", Vec2u(600, 400), WindowFrame | WindowResizable);
      w->canvas->set_clear_color(Vec4c(255));

      auto e = Entity::create();
      e->load(L"tests/button_test");
      w->root->add_child(e);

      g_app.run();

      return 0;
    }

然后，再在此目录创建一个CMakeLists.txt的文件，其中内容为：

    cmake_minimum_required(VERSION 3.16.4)

    project(xxx)

    add_definitions(-W0 -std:c++latest)

    foreach(type ${CMAKE_CONFIGURATION_TYPES})
      string(TOUPPER ${type} type_u)
      string(TOLOWER ${type} type_l)
      set(CMAKE_RUNTIME_OUTPUT_DIRECTORY_${type_u} "${CMAKE_SOURCE_DIR}/bin/${type_l}")
      set(CMAKE_LIBRARY_OUTPUT_DIRECTORY_${type_u} "${CMAKE_SOURCE_DIR}/bin/${type_l}")
      set(CMAKE_ARCHIVE_OUTPUT_DIRECTORY_${type_u} "${CMAKE_SOURCE_DIR}/bin/${type_l}")
    endforeach()

    set(FLAME_DIR "" CACHE PATH "Flame Engine Dir")

    if (EXISTS "${dir}/pugixml")
      set(temp "${dir}/pugixml")
    else()
      set(temp "")
    endif()
    set(PUGIXML_INCLUDE_DIR "${temp}/src" CACHE PATH "Pugi XML Directory")
    set(PUGIXML_DEBUG_STATIC_LIBRARY_PATH "${temp}/build/Debug/pugixml.lib" CACHE FILEPATH "Pugi XML Debug STATIC Library Path")
    set(PUGIXML_RELEASE_STATIC_LIBRARY_PATH "${temp}/build/Release/pugixml.lib" CACHE FILEPATH "Pugi XML Release STATIC Library Path")

    if (EXISTS "${dir}/json")
      set(temp "${dir}/json")
    else()
      set(temp "")
    endif()
    set(NJSON_INCLUDE_DIR "${temp}/include" CACHE PATH "NJson Include Directory")

    add_executable(xxx main.cpp)
    set_target_properties(xxx PROPERTIES VS_DEBUGGER_WORKING_DIRECTORY "${CMAKE_CURRENT_SOURCE_DIR}")
    target_include_directories(xxx PRIVATE "${FLAME_DIR}/include")
    target_include_directories(xxx PRIVATE "${PUGIXML_INCLUDE_DIR}")
    target_include_directories(xxx PRIVATE "${NJSON_INCLUDE_DIR}")
    target_link_libraries(xxx "${FLAME_DIR}/bin/debug/flame_foundation.lib")
    target_link_libraries(xxx "${FLAME_DIR}/bin/debug/flame_graphics.lib")
    target_link_libraries(xxx "${FLAME_DIR}/bin/debug/flame_sound.lib")
    target_link_libraries(xxx "${FLAME_DIR}/bin/debug/flame_universe.lib")
    add_custom_command(TARGET xxx POST_BUILD COMMAND ${CMAKE_COMMAND} -E copy_if_different "${FLAME_DIR}/bin/debug/flame_foundation.dll" "${CMAKE_SOURCE_DIR}/bin/debug")
    add_custom_command(TARGET xxx POST_BUILD COMMAND ${CMAKE_COMMAND} -E copy_if_different "${FLAME_DIR}/bin/debug/flame_graphics.dll" "${CMAKE_SOURCE_DIR}/bin/debug")
    add_custom_command(TARGET xxx POST_BUILD COMMAND ${CMAKE_COMMAND} -E copy_if_different "${FLAME_DIR}/bin/debug/flame_graphics.typeinfo" "${CMAKE_SOURCE_DIR}/bin/debug")
    add_custom_command(TARGET xxx POST_BUILD COMMAND ${CMAKE_COMMAND} -E copy_if_different "${FLAME_DIR}/bin/debug/flame_sound.dll" "${CMAKE_SOURCE_DIR}/bin/debug")
    add_custom_command(TARGET xxx POST_BUILD COMMAND ${CMAKE_COMMAND} -E copy_if_different "${FLAME_DIR}/bin/debug/flame_sound.typeinfo" "${CMAKE_SOURCE_DIR}/bin/debug")
    add_custom_command(TARGET xxx POST_BUILD COMMAND ${CMAKE_COMMAND} -E copy_if_different "${FLAME_DIR}/bin/debug/flame_universe.dll" "${CMAKE_SOURCE_DIR}/bin/debug")
    add_custom_command(TARGET xxx POST_BUILD COMMAND ${CMAKE_COMMAND} -E copy_if_different "${FLAME_DIR}/bin/debug/flame_universe.typeinfo" "${CMAKE_SOURCE_DIR}/bin/debug")
    
请替换文件中的xxx为你项目的名字。

然后用CMake打开这个目录，并对其中的配置进行配置，点击 generate ，使用 Visual Studio 打开即可构建运行你的项目。
